export ZSH_THEME='robbyrussell'

# History configuration
HISTSIZE=50000
SAVEHIST=50000
HISTFILE=~/.zsh_history
setopt SHARE_HISTORY          # Share history between sessions
setopt EXTENDED_HISTORY       # Add timestamps to history
setopt HIST_EXPIRE_DUPS_FIRST # Delete duplicates first when HISTFILE size exceeds HISTSIZE
setopt HIST_IGNORE_ALL_DUPS   # Don't record duplicates in history
setopt HIST_IGNORE_SPACE      # Don't record commands starting with a space
setopt HIST_FIND_NO_DUPS     # Do not display duplicates of a line previously found
setopt HIST_SAVE_NO_DUPS     # Don't write duplicate entries in the history file
setopt HIST_REDUCE_BLANKS    # Remove superfluous blanks before recording entry
setopt HIST_VERIFY           # Don't execute immediately upon history expansion

# Better directory navigation
setopt AUTO_CD              # If a command is issued that can't be executed as a normal command, and the command is the name of a directory, perform the cd command to that directory
setopt AUTO_PUSHD          # Make cd push the old directory onto the directory stack
setopt PUSHD_IGNORE_DUPS   # Don't push multiple copies of the same directory onto the directory stack
setopt PUSHD_MINUS         # Exchanges the meanings of '+' and '-' when used with a number to specify a directory in the stack

# Completion system
autoload -Uz compinit && compinit
zstyle ':completion:*' menu select                 # Enable menu selection
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}' # Case insensitive completion
zstyle ':completion:*' list-colors "${(s.:.)LS_COLORS}" # Colored completion (different colors for dirs/files/etc)
zstyle ':completion:*' special-dirs true          # Complete . and .. special directories
zstyle ':completion:*' completer _expand _complete _correct _approximate # Enable approximate matches for completion

# Aliases
# Git aliases
alias gs='git status'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git pull'
alias gd='git diff'
alias gco='git checkout'
alias gb='git branch'
alias gst='git stash'
alias grb='git rebase'

# Directory navigation
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias ll='ls -lah'
alias l='ls -lh'

# Utility aliases
alias h='history'
alias grep='grep --color=auto'
alias df='df -h'
alias du='du -h'

# Development aliases
alias dc='docker-compose'
alias k='kubectl'
alias python='python3'
alias pip='pip3'

# Make directory and cd into it
mkcd() {
  mkdir -p "$1" && cd "$1"
}

# Extract various archive formats
extract() {
  if [ -f $1 ]; then
    case $1 in
      *.tar.bz2)   tar xjf $1     ;;
      *.tar.gz)    tar xzf $1     ;;
      *.bz2)       bunzip2 $1     ;;
      *.rar)       unrar e $1     ;;
      *.gz)        gunzip $1      ;;
      *.tar)       tar xf $1      ;;
      *.tbz2)      tar xjf $1     ;;
      *.tgz)       tar xzf $1     ;;
      *.zip)       unzip $1       ;;
      *.Z)         uncompress $1  ;;
      *.7z)        7z x $1        ;;
      *)           echo "'$1' cannot be extracted" ;;
    esac
  else
    echo "'$1' is not a valid file"
  fi
}

# Add color to the terminal
export CLICOLOR=1
export LSCOLORS=GxFxCxDxBxegedabagaced

# Better command line navigation
bindkey "^[[1;5C" forward-word
bindkey "^[[1;5D" backward-word
